<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Clients List </ion-title>
    <ion-button
      [hidden]="showEntryText"
      (click)="resetSearch()"
      slot="end"
      fill="none"
      data-bs-toggle="collapse"
      data-bs-target="#collapseExample"
      ><ion-icon name="search-sharp" slot="icon-only"></ion-icon
    ></ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="collapse sticky-top mt-2 mb-0 mx-2" id="collapseExample">
    <div class="input-group bgLight">
      <input
        type="text"
        class="form-control"
        placeholder="type to search clients..."
        [(ngModel)]="clientSearchValue"
        aria-label="Username"
        aria-describedby="basic-addon1"
      />
      <span
        class="input-group-text"
        id="basic-addon1"
        (click)="resetSearch()"
        data-bs-toggle="collapse"
        data-bs-target="#collapseExample"
        >Close</span
      >
    </div>
  </div>

  <div *ngIf="showEntryText" class="container my-2">
    <ion-item
      color="light"
      lines="none"
      class="border border-primary border-3 text-center rounded-3 mb-2"
    >
      <ion-label class="fs-5"> Clida says Hello ðŸ‘‹</ion-label>
    </ion-item>

    <div class="bgLight rounded-3 mt-1 pb-1">
      <div class="justifyText p-2">
        To load already saved data from json file, click on Export/Import button
        or go to the Share tab from the bottom navigation bar.
      </div>
      <div class="text-center">
        <button class="btn btn-primary mb-1" routerLink="/clida/about">
          Export / Import
        </button>
      </div>
    </div>

    <div class="bgLight rounded-3 mt-2 pb-1">
      <div class="justifyText p-2">
        To add the clients manually, click on the below button or click on the
        bottom right add button.
      </div>
      <div class="text-center">
        <button
          class="btn btn-danger mb-1"
          routerLink="/clida/clients-list/add-client"
        >
          Add new Client
        </button>
      </div>
    </div>

    <div class="mt-2">
      <div class="text-center bg-warning rounded-3">
        <ion-icon name="alert-circle-outline" size="large"></ion-icon>
      </div>
      <div class="justifyText bgLight p-2 rounded-3">
        Please save your data periodically using the Share tab. The data will be
        saved in the documents folder in your phone's internal storage, when you
        click on export button.
      </div>
    </div>
  </div>

  <div *ngIf="!showEntryText">
    <ion-item
      *ngFor="let client of clientsData | clientsSearch:clientSearchValue"
      (click)="openClientDetails(client.key)"
      color="light"
      class="m-2 rounded-3"
    >
      <div>{{client?.data.name}}</div>
      <div class="ms-auto d-flex text-end">
        <div class="mt-1">
          <ion-badge
            *ngFor="let clientDetail of client.data.data"
            class="ms-1"
            [color]="getColor(clientDetail)"
            slot="end"
            >{{(clientDetail.principal/1000).toFixed() + 'K'}}
          </ion-badge>
        </div>
      </div>
    </ion-item>
  </div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button
      color="danger"
      routerLink="/clida/clients-list/add-client"
      class="me-2 mb-1"
      size="small"
    >
      <ion-icon name="add" size="large"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
