<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Clients List </ion-title>
    <ion-button
      [hidden]="showEntryText"
      (click)="resetSearch()"
      slot="end"
      fill="none"
      data-bs-toggle="collapse"
      data-bs-target="#collapseExample"
      ><ion-icon name="search-sharp" slot="icon-only"></ion-icon
    ></ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="collapse sticky-top mb-0" id="collapseExample">
    <div class="container input-group px-2 pt-2 pb-1">
      <input
        type="text"
        class="form-control"
        placeholder="Type to search Clients"
        [(ngModel)]="clientSearchValue"
      />
      <span class="input-group-text" (click)="resetSearch()"
        ><ion-icon name="close-circle-outline" size="large"></ion-icon
      ></span>
    </div>
  </div>

  <div *ngIf="showEntryText" class="text-center mx-2 container">
    <h3 class="border border-primary border-3 p-2 rounded-3 mt-3">
      Clida says Hello ðŸ‘‹
    </h3>

    <div class="bg-info p-2 rounded-3">
      <p>
        If you used the app before,<br />
        and to load the previous data,<br />
        click on Export/Import button ,<br />
        to import Json file.
      </p>
      <button class="btn btn-primary mb-1 rounded-pill" routerLink="/share">
        Export / Import
      </button>
    </div>

    <div class="bg-info p-2 rounded-3 mt-2">
      <p>
        To add the clients manually,<br />
        click on the below button, Or<br />
        click on the bottom right add button.
      </p>
      <button
        class="btn btn-danger mb-1 rounded-pill"
        routerLink="/addNewClient"
      >
        Add new Client
      </button>
    </div>

    <div class="bg-warning p-2 rounded-3 mt-2">
      <ion-icon name="alert-circle" size="large"></ion-icon>
      <p class="text-justify">
        Please save your data periodically using the Export / Import tab in
        menu. The data is saved in the documents folder in your phone internal
        storage
      </p>
    </div>
  </div>

  <div *ngIf="!showEntryText" class="container">
    <button
      *ngFor="let client of clientsData | clientsSearch:clientSearchValue"
      (click)="openClientDetails(client.name)"
      class="list-group-item list-group-item-action rounded-3 my-1 silverBg border-2"
    >
      <span class="fs-5">{{client?.name}}</span>
      <span class="badge rounded-circle bg-primary m-2 my-0"
        >{{client?.data?.length - getRecordsInfo(client.data)}}</span
      >
      <span class="badge rounded-circle bg-success"
        >{{getRecordsInfo(client.data)}}</span
      >
    </button>
  </div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button
      size="small"
      color="danger"
      routerLink="/addNewClient"
      class="me-2 mb-1"
    >
      <ion-icon name="add" size="large"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
